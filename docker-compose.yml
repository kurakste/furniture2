version: '2'
services:
   php:
      image: yiisoftware/yii2-php:7.1-apache
      volumes:
      - ~/.composer-docker/cache:/root/.composer/cache:delegated
      - ./:/app:delegated
      ports:
      - '8000:80'
   db:
      image: mysql:5.7
      environment:
         MYSQL_ROOT_PASSWORD: foo
         MYSQL_DATABASE: furniture
         MYSQL_USER: homework
         MYSQL_PASSWORD: akfyem
      ports:
         - 3306:3306

   phpmyadmin:
      depends_on:
         - db
      links:
         - db
      image: phpmyadmin/phpmyadmin
      environment:
         PMA_ARBITRARY: 1
         PMA_HOST: db
         PMA_USER: root
         PMA_PASSWORD: foo
      ports:
         - 8081:80
      volumes:
         - /sessions
